exports {reify, same_type}

same_type :: MASS.same_type

reify :: macro(value : &MASS.Value, type : Type) {
  assert(value.storage.tag == MASS.Storage_Tag.Static)
  // FIXME check all variants
  //assert(value.storage.Static.memory.tag == MASS.Static_Memory_Tag.Heap)
  assert(same_type(value.descriptor, type))
  cast(&type, value.storage.Static.memory.Heap.pointer)
}
